<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>–û –≥–æ–Ω–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —É—Å–ª–æ–≤–∏—è—Ö –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ &mdash; @emacsway&#39;s blog</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/jquery-toast-plugin/jquery.toast.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/fa/css/all.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/jquery-toast-plugin/jquery.toast.min.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="@emacsway&#39;s blog" href="../../" />
  

   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />


    

        <meta http-equiv="Last-Modified" content="Wed, 31 Mar 2021 00:00:00 GMT" />
        
            <meta name="description" content="–î–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π —Å Telegram-channel @emacsway_log. –û–¥–Ω–æ–π –∏–∑ –Ω–µ–ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ–º –≤ DDD –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —è–≤–ª—è–µ—Ç—Å—è —Ç.–Ω. –ø—Ä–æ–±–ª–µ–º–∞ ‚Äú–∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤‚Äù. –≠—Ç–æ –∫–æ–≥–¥–∞ –¥–≤–∞ –ø—Ä–∏—á–∏–Ω–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–æ–±—ã—Ç–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏–µ —É–∑–ª—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π, –∏ –≤—Ç–æ—Ä–æ–µ —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç ‚Äú–æ–±–æ–≥–Ω–∞—Ç—å‚Äù –ø–µ—Ä–≤–æ–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –ø—Ä–∏—á–∏–Ω–µ —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –≤–æ–∑–Ω–∏–∫–ª–∏ —Å–µ—Ç–µ–≤—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏, –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞, –∏–ª–∏ –ø–æ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–∏—á–∏–Ω–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ (ack) —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –≥–æ–Ω–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π." />
        
        
            <meta property="og:image" content="../../_static/logo.jpg" />
            <link rel="image_src" href="../../_static/logo.jpg" />
        

        <link rel="canonical" href="https://emacsway.github.io/ru/message-ordering-in-competing-consumers/" />

        <script type="text/javascript">
            setTimeout(function() {
                $.toast({
                    text: 'If you like this site, please support it with an external link or share it with an social nerwork. <br />Subscribe to my <a class="reference external" href="https://t.me/emacsway_log"><i class="fab fa-telegram"></i> Telegram-channel</a>. Thanks!',
                    position: 'bottom-right',
                    hideAfter: 12000
                });
            }, 30000);
        </script>

    


  
  <link rel="alternate" type="application/atom+xml"  href="../../blog/atom.xml" title="@emacsway's blog">
  
  
  <link href="True" rel="stylesheet">
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1><a class="toc-backref" href="#id7">–û –≥–æ–Ω–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —É—Å–ª–æ–≤–∏—è—Ö –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</a><a class="headerlink" href="#id1" title="Permalink to this headline">¬∂</a></h1>
<p>–î–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏—é <a class="reference external" href="https://t.me/emacsway_log/57">—Å–æ–æ–±—â–µ–Ω–∏–π</a> —Å Telegram-channel <a class="reference external" href="https://t.me/emacsway_log">&#64;emacsway_log</a>. –û–¥–Ω–æ–π –∏–∑ –Ω–µ–ø—Ä–æ—Å—Ç—ã—Ö  —Ç–µ–º –≤ DDD –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —è–≤–ª—è–µ—Ç—Å—è —Ç.–Ω. <strong>–ø—Ä–æ–±–ª–µ–º–∞ &#8220;–∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤&#8221;</strong>. –≠—Ç–æ –∫–æ–≥–¥–∞ –¥–≤–∞ –ø—Ä–∏—á–∏–Ω–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–æ–±—ã—Ç–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏–µ —É–∑–ª—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π, –∏ –≤—Ç–æ—Ä–æ–µ —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç &#8220;–æ–±–æ–≥–Ω–∞—Ç—å&#8221; –ø–µ—Ä–≤–æ–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –ø—Ä–∏—á–∏–Ω–µ —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –≤–æ–∑–Ω–∏–∫–ª–∏ —Å–µ—Ç–µ–≤—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏, –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞, –∏–ª–∏ –ø–æ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–∏—á–∏–Ω–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ (ack) —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –≥–æ–Ω–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.</p>
<div class="contents topic" id="id2">
<p class="topic-title first">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</p>
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id7">–û –≥–æ–Ω–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —É—Å–ª–æ–≤–∏—è—Ö –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</a></li>
<li><a class="reference internal" href="#id3" id="id8">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏</a></li>
<li><a class="reference internal" href="#id4" id="id9">–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π</a></li>
<li><a class="reference internal" href="#id5" id="id10">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</a></li>
<li><a class="reference internal" href="#id6" id="id11">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</a></li>
</ul>
</div>
<p>–ù–∞–ø—Ä–∏–º–µ—Ä, <a class="reference external" href="https://docs.nats.io/nats-concepts/queue">NATS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Round-robin –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –≥—Ä—É–ø–ø—ã</a>, –∏ —Ç–∞–º —ç—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Ö–æ—Ä–æ—à–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è. –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ <a class="reference external" href="https://bravenewgeek.com/building-a-distributed-log-from-scratch-part-5-sketching-a-new-system/">–ø–æ—è–≤–∏–ª–æ—Å—å</a> —Ç–æ–ª—å–∫–æ –≤ –ø–æ–∫–∞ –µ—â–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–º <a class="reference external" href="https://github.com/nats-io/jetstream">jetstream</a>.</p>
<p>–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –º–æ–∂–µ—Ç –ø–∞–∫–µ—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.</p>
<p>–û–¥–∏–Ω –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–Ω–µ –∑–∞–ø–æ–º–Ω–∏–ª—Å—è (—Å –∫–∞–∫–æ–π-—Ç–æ —Å—Ç–∞—Ç—å–∏) - —ç—Ç–æ –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Ü.—Å–µ—Ç–∏ —É–¥–∞–ª—è–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏ —Ç—É—Ç –∂–µ —à–ª–µ—Ç –æ—Å—Ç–∞–≤—à–∏–º—Å—è –¥—Ä—É–∑—å—è–º –ø–∏—Å—å–º–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–∏—Å–∫—Ä–µ–¥–∏—Ç–∏—Ä—É–µ—Ç —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –¥–≤–∞ —Å–æ–±—ã—Ç–∏—è, –ø–µ—Ä–≤–æ–µ - –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∞, –≤—Ç–æ—Ä–æ–µ - –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è —Å–ø–∏—Å–∫—É –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –¥—Ä—É–∑–µ–π. –ü—Ä–∏—á–µ–º, –≤—Ç–æ—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∏—á–∏–Ω–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ, –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –≥–æ–Ω–∫–∞ —Å–æ–±—ã—Ç–∏–π.</p>
<p>–í —É—Å–ª–æ–≤–∏—è—Ö –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤, —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è. –ò —Ç–æ–≥–¥–∞, –≤ –º–æ–º–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∏—Å–∫—Ä–µ–¥–∏—Ç–∏—Ä—É—é—â–µ–≥–æ –ø–∏—Å—å–º–∞ —Å–ø–∏—Å–∫—É –¥—Ä—É–∑–µ–π, —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ –µ—â–µ –±—É–¥–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å–ø–∏—Å–∫–µ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π.</p>
<p>–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã:</p>
<ol class="arabic simple">
<li>–ù–∏–≤–µ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (—É—Å—Ç—Ä–∞–Ω–∏—Ç—å —Å–∏–º–ø—Ç–æ–º—ã) –æ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π (–∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å).</li>
<li>–ò—Å–∫–ª—é—á–∏—Ç—å –ø—Ä–∏—á–∏–Ω—ã –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π.</li>
<li>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π.</li>
<li>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.</li>
</ol>
<p>–ë—É–¥–µ–º —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–∞—Ö.</p>
<p>–ê –ø–æ–∫–∞ - —Å–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ä–æ—à–æ –æ—Å–≤–µ—â–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É:</p>
<ul class="simple">
<li>&#8220;Designing Data-Intensive Applications. The Big Ideas Behind Reliable, Scalable, and Maintainable Systems&#8221; by Martin Kleppmann</li>
<li>&#8220;Database Internals: A Deep Dive into How Distributed Data Systems Work&#8221; by Alex Petrov</li>
<li>&#8220;Distributed systems: principles and paradigms&#8221; 3d edition by Andrew S. Tanenbaum, Maarten Van Steen</li>
<li>&#8220;Database Reliability Engineering. Designing and Operating Resilient Database Systems.&#8221; by Laine Campbell and Charity Majors</li>
<li>&#8220;<a class="reference external" href="https://leanpub.com/dddwithpython">Event Sourced Building Blocks for Domain-Driven Design with Python</a>&#8221; by John Bywater</li>
</ul>
<p>–°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º:</p>
<ul class="simple">
<li>&#8220;Enterprise Integration Patterns: Designing, Building, and Deploying Messaging Solutions&#8221; by Gregor Hohpe, Bobby Woolf</li>
<li>&#8220;Reactive Messaging Patterns with the Actor Model: Applications and Integration in Scala and Akka&#8221; by Vaughn Vernon</li>
<li>&#8220;Camel in Action&#8221; 2nd Edition by Claus Ibsen and Jonathan Anstey</li>
</ul>
<p>–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/VaughnVernon/ReactiveMessagingPatterns_ActorModel">https://github.com/VaughnVernon/ReactiveMessagingPatterns_ActorModel</a></li>
<li><a class="reference external" href="https://camel.apache.org/components/latest/eips/enterprise-integration-patterns.html">https://camel.apache.org/components/latest/eips/enterprise-integration-patterns.html</a></li>
<li><a class="reference external" href="https://github.com/camelinaction/camelinaction2">https://github.com/camelinaction/camelinaction2</a></li>
<li><a class="reference external" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/">https://www.enterpriseintegrationpatterns.com/patterns/messaging/</a></li>
</ul>
<p>–ö–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:</p>
<ul class="simple">
<li><a class="reference external" href="https://jepsen.io/consistency">https://jepsen.io/consistency</a></li>
</ul>
<p>–®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ EIP-–ø–∞—Ç—Ç–µ—Ä–Ω–∞–º:</p>
<ul class="simple">
<li>&#8220;<a class="reference external" href="https://www.enterpriseintegrationpatterns.com/download/EIPTutorialReferenceChart.pdf">Enterprise Integration Patterns Tutorial Reference Chart</a>&#8220;</li>
</ul>
<p>–ö–∞—Ç–∞–ª–æ–≥–∏:</p>
<ul class="simple">
<li>&#8220;<a class="reference external" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/">Cloud Design Patterns</a>&#8220;</li>
<li>&#8220;<a class="reference external" href="https://docs.microsoft.com/en-us/previous-versions/msp-n-p/dn568099(v=pandp.10)">Cloud Design Patterns. Prescriptive architecture guidance for cloud applications</a>&#8221; by Alex Homer, John Sharp, Larry Brader, Masashi Narumoto, Trent Swanson.</li>
</ul>
<p>Code Samples:</p>
<ul class="simple">
<li><a class="reference external" href="http://aka.ms/cloud-design-patterns-sample">http://aka.ms/cloud-design-patterns-sample</a></li>
<li>&#8220;<a class="reference external" href="https://docs.microsoft.com/en-us/azure/architecture/best-practices/">Cloud Best Practices</a>&#8221; by Microsoft Corporation and community</li>
</ul>
</div>
<div class="section" id="id3">
<h1><a class="toc-backref" href="#id8">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏</a><a class="headerlink" href="#id3" title="Permalink to this headline">¬∂</a></h1>
<p>–ü–µ—Ä–≤–∞—è –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã &#8220;–∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤&#8221; - —ç—Ç–æ &#8220;<strong>–Ω–∏–≤–µ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (—É—Å—Ç—Ä–∞–Ω–∏—Ç—å —Å–∏–º–ø—Ç–æ–º—ã) –æ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π (–∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å)</strong>&#8221;.</p>
<p>–ß–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç —Ç–∞–∫, —á—Ç–æ –¥–≤–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–¥—Ä—è–¥ –Ω–∞–¥ –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –∞–≥—Ä–µ–≥–∞—Ç–æ–º –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Ç–æ–º—É, —á—Ç–æ, –≤ —É—Å–ª–æ–≤–∏—è—Ö –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤, —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –º–æ–∂–µ—Ç –æ–±–æ–≥–Ω–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è. –ï—Å–ª–∏ –ø—Ä–∏ —ç—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è &#8220;<strong>Event-Carried State Transfer</strong>&#8221; ( <a class="reference external" href="https://martinfowler.com/articles/201701-event-driven.html">https://martinfowler.com/articles/201701-event-driven.html</a> ), —Ç–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–∫–æ—Ç–æ—Ä–æ–µ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–µ—Ä–≤—ã–º), —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –æ–ø–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–∂–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.</p>
<p>–ö–∞–∫ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ &#8220;<strong>Event Notification</strong>&#8221;. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –ø—Ä–æ–∫–∞—Ç—ã–≤–∞–µ—Ç. –ù–æ –æ–Ω —É—Ö—É–¥—à–∞–µ—Ç availability (CAP-Theorem) –∏–∑-–∑–∞ –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.</p>
<p>–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —Ç–∞–∫–∂–µ –ø—Ä–æ–∫–∞—Ç—ã–≤–∞–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è, –µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–±—ã—Ç–∏–µ —É–∂–µ –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ.</p>
</div>
<div class="section" id="id4">
<h1><a class="toc-backref" href="#id9">–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π</a><a class="headerlink" href="#id4" title="Permalink to this headline">¬∂</a></h1>
<p>–í—Ç–æ—Ä–∞—è –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã &#8220;–∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤&#8221; - —ç—Ç–æ &#8220;<strong>–∏—Å–∫–ª—é—á–∏—Ç—å –ø—Ä–∏—á–∏–Ω—ã –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π</strong>&#8221;.</p>
<p>–≠—Ç–æ–º—É —Å–ø–æ—Å–æ–±—É —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Å–≤—è—â–µ–Ω–∞ –≥–ª–∞–≤–∞ &#8220;<a class="reference external" href="https://livebook.manning.com/book/microservices-patterns/chapter-3/section-3-3-5?origin=product-toc">3.3.5 Competing receivers and message ordering</a>&#8221; –∫–Ω–∏–≥–∏ &#8220;Microservices Patterns: With examples in Java&#8221; by Chris Richardson</p>
<p>–ï—Å–ª–∏ m–µssaging system –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤, —Ç–æ –µ–≥–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –ø–∞—Ç—Ç–µ—Ä–Ω–∞ EIP &#8220;<a class="reference external" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/ContentBasedRouter.html">Content-Based Router</a>&#8220;</p>
<p>–ù–∞–ø—Ä–∏–º–µ—Ä, <a class="reference external" href="https://camel.apache.org/components/latest/eips/content-based-router-eip.html">–∏—Å–ø–æ–ª—å–∑—É—è Camel Framework</a>.</p>
<p>–° –ø–æ–º–æ—â—å—é –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ –º—ã –¥–æ–±–∏–≤–∞–µ–º—Å—è —Ç–æ–≥–æ, —á—Ç–æ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ <strong>–ø—Ä–∏—á–∏–Ω–Ω–æ-–∑–∞–≤–∏—Å–∏–º–æ–≥–æ (causal) –ø–æ—Ç–æ–∫–∞</strong> –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —É–∑–µ–ª –≥—Ä—É–ø–ø—ã –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤. –ù–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã. –ó–¥–µ—Å—å –≤–≤–æ–¥–∏—Ç—Å—è –Ω–æ–≤—ã–π –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±—à–∏—Ä–Ω—ã–π —Ç–µ—Ä–º–∏–Ω &#8220;<strong>Causal Consistency</strong>&#8221;, –∏–º–µ—é—â–∏–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö, –∫—Ç–æ –∏–º–µ–µ—Ç –¥–µ–ª–æ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.</p>
<p>Vaughn Vernon –≤ &#8220;Reactive Messaging Patterns with the Actor Model: Applications and Integration in Scala and Akka&#8221; (RMPwAM) —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –¥–≤–µ —Å—Ç–∞—Ç—å–∏ –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É:</p>
<ul class="simple">
<li><a class="reference external" href="https://queue.acm.org/detail.cfm?id=2610533">https://queue.acm.org/detail.cfm?id=2610533</a></li>
<li><a class="reference external" href="http://www.bailis.org/papers/bolton-sigmod2013.pdf">http://www.bailis.org/papers/bolton-sigmod2013.pdf</a></li>
</ul>
<p>–ö–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏:</p>
<ul class="simple">
<li><a class="reference external" href="https://jepsen.io/consistency">https://jepsen.io/consistency</a></li>
</ul>
<p>–ë—ã–ª–æ –±—ã, –Ω–∞–≤–µ—Ä–Ω–æ–µ, —É–º–µ—Å—Ç–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —ç—Ç–æ–≥–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –ø–∞—Ä—É –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ —Ç–µ–º—É CAP-theorem –∏ Consistency:</p>
<p>–°–∞–º–æ–µ –ø–æ–Ω—è—Ç–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ CAP-Theorem, –∫–æ—Ç–æ—Ä–æ–µ —è –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª:</p>
<ul class="simple">
<li>&#8220;<a class="reference external" href="http://ksat.me/a-plain-english-introduction-to-cap-theorem">A plain english introduction to CAP Theorem</a>&#8221; by Kaushik Sathupadi (<a class="reference external" href="https://habr.com/ru/post/130577/">–ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Ä—É—Å—Å–∫–∏–π</a>)</li>
</ul>
<p>–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–∞—è —Å—Ç–∞—Ç—å—è –æ—Ç CTO of Amazon.com Werner Vogels:</p>
<ul class="simple">
<li>&#8220;<a class="reference external" href="https://www.allthingsdistributed.com/2008/12/eventually_consistent.html">Eventually Consistent - Revisited</a>&#8220;</li>
</ul>
</div>
<div class="section" id="id5">
<h1><a class="toc-backref" href="#id10">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</a><a class="headerlink" href="#id5" title="Permalink to this headline">¬∂</a></h1>
<p>–¢—Ä–µ—Ç—å—è –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã &#8220;–∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤&#8221; - —ç—Ç–æ &#8220;<strong>–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π</strong>&#8221;.</p>
<blockquote>
<div><p>üìù &#8220;–•—å—é–∏—Ç—Ç –±—ã–ª –ø—Ä–æ—Ç–∏–≤ –≤–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –æ —Ç–æ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–±—ã–≤–∞—Ç—å –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –º–æ–¥–µ–ª—å –∞–∫—Ç–æ—Ä–∞. –ï—Å–ª–∏ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Ç–æ —ç—Ç–æ –º–æ–∂–Ω–æ —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –æ—á–µ—Ä–µ–¥–∏ –∞–∫—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –¢–∞–∫–∏–µ –æ—á–µ—Ä–µ–¥–∏ –∞–∫—Ç–æ—Ä–æ–≤ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–ª–∏ –±—ã –ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã –≤ –ø–æ—Ä—è–¥–∫–µ FIFO. –í –æ–±—â–µ–º –∂–µ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∞–∫—Ç–æ—Ä X –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ M1 –∞–∫—Ç–æ—Ä—É Y, –∞ –∑–∞—Ç–µ–º —Ç–æ—Ç –∂–µ –∞–∫—Ç–æ—Ä X –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥—Ä—É–≥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ M2 –∫ Y, —Ç–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –æ —Ç–æ–º, —á—Ç–æ M1 –ø—Ä–∏–¥—ë—Ç –∫ Y —Ä–∞–Ω—å—à–µ M2.&#8221;</p>
<p class="attribution">&mdash;P–∞–∑–¥–µ–ª &#8220;<a class="reference external" href="https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%BE%D0%B2#%D0%9D%D0%B8%D0%BA%D0%B0%D0%BA%D0%B8%D1%85_%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B9_%D0%BE_%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BA%D0%B5_%D0%BF%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B9">–ù–∏–∫–∞–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –æ –ø–æ—Ä—è–¥–∫–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π</a>&#8221; —Å—Ç–∞—Ç—å–∏ &#8220;–ú–æ–¥–µ–ª—å –∞–∫—Ç–æ—Ä–æ–≤&#8221; –í–∏–∫–∏–ø–µ–¥–∏–∏</p>
</div></blockquote>
<p>–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å EIP Pattern &#8220;<a class="reference external" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/Resequencer.html">Resequencer</a>&#8221;. –ù–∞–ø—Ä–∏–º–µ—Ä, <a class="reference external" href="https://camel.apache.org/components/latest/eips/resequence-eip.html">–∏—Å–ø–æ–ª—å–∑—É—è Camel Framework</a>.</p>
</div>
<div class="section" id="id6">
<h1><a class="toc-backref" href="#id11">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</a><a class="headerlink" href="#id6" title="Permalink to this headline">¬∂</a></h1>
<p>–ß–µ—Ç–≤–µ—Ä—Ç–∞—è –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã &#8220;–∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤&#8221; - —ç—Ç–æ &#8220;<strong>–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</strong>&#8221;.</p>
<p>–ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –º–æ–∂–Ω–æ –ø–æ–π—Ç–∏ –¥—Ä—É–≥–∏–º –ø—É—Ç–µ–º, –∏ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –ù–æ, –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ, –ø–æ–¥–ø–∏—Å—á–∏–∫ —Å–∞–º –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç —Ä–µ—à–∞—Ç—å, –º–æ–∂–µ—Ç –ª–∏ –æ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç—É–ø–∏–≤—à–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏–ª–∏ –∂–µ –ø—Ä–∏—á–∏–Ω–Ω–æ-–ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—â–µ –ø–æ–∫–∞ –Ω–µ –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ, –∏ —Ç–æ–≥–¥–∞ –æ–Ω –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å—Ç—É–ø–∏–≤—à–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥–∏. –ü—Ä–∞–≤–¥–∞, –Ω–∞ –≤—ã—è—Å–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã (–≥–¥–µ-—Ç–æ –Ω—É–∂–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø–æ—Ç–æ–º —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—Ç—å—Å—è, —á—Ç–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–∏—á–∏–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ).</p>
<p>–ö–∞–∫ –∫—Ä–∞—Å–∏–≤–æ –∑–∞–º–µ—Ç–∏–ª Alexey Zimarev, &#8220;–º–∏—Ä occasionally-connected —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –Ω–µ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω&#8221;.</p>
<p>–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ Actor Model:</p>
<blockquote>
<div><p>üìù &#8221;... –º–æ–¥–µ–ª—å –∞–∫—Ç–æ—Ä–æ–≤ –∑–µ—Ä–∫–∞–ª—å–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –∫–æ–º–º—É—Ç–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–∞–∫–µ—Ç—ã –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –≤ –ø–æ—Ä—è–¥–∫–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–π –ø–æ—Ä—è–¥–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–µ –∫–æ–º–º—É—Ç–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É—Ç–µ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤, –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.&#8221;</p>
<p class="attribution">&mdash;P–∞–∑–¥–µ–ª &#8220;<a class="reference external" href="https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%BE%D0%B2#%D0%9D%D0%B8%D0%BA%D0%B0%D0%BA%D0%B8%D1%85_%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B9_%D0%BE_%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BA%D0%B5_%D0%BF%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B9">–ù–∏–∫–∞–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –æ –ø–æ—Ä—è–¥–∫–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π</a>&#8221; —Å—Ç–∞—Ç—å–∏ &#8220;–ú–æ–¥–µ–ª—å –∞–∫—Ç–æ—Ä–æ–≤&#8221; –í–∏–∫–∏–ø–µ–¥–∏–∏</p>
</div></blockquote>
<blockquote>
<div><p>üìù &#8220;Messages in the Actor model are generalizations of packets in Internet computing in that they need not be received in the order sent. Not implementing the order of delivery, allows packet switching to buffer packets, use multiple paths to send packets, resend damaged packets, and to provide other optimizations.</p>
<p>For example, Actors are allowed to pipeline the processing of messages. What this means is that in the course of processing a message m1, an Actor can designate how to process the next message, and then in fact begin processing another message m2 before it has finished processing m1. Just because an Actor is allowed to pipeline the processing of messages does not mean that it must pipeline the processing. Whether a message is pipelined is an engineering tradeoff.&#8221;</p>
<p class="attribution">&mdash;&#8220;<a class="reference external" href="https://arxiv.org/abs/1008.1459">Actor  Model  of  Computation: Scalable  Robust  Information Systems</a>&#8221; by Carl Hewitt</p>
</div></blockquote>
<p>–¢—É—Ç –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–æ–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ. –•–æ—Ç—è, –∫–∞–∫ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å —Ä–∞–Ω–µ–µ, &#8220;<em>–•—å—é–∏—Ç—Ç –±—ã–ª –ø—Ä–æ—Ç–∏–≤ –≤–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –æ —Ç–æ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–±—ã–≤–∞—Ç—å –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –º–æ–¥–µ–ª—å –∞–∫—Ç–æ—Ä–∞</em>&#8221;, –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö Actor Model mailbox –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ FIFO-queue:</p>
<blockquote>
<div>üìù &#8220;One of the guarantees of the Actor model is sequential message delivery. That is, by default actor mailboxes are first-in, first-out (FIFO) channels. When a message arrives through the actor‚Äôs channel, it will be received in the order in which it was sent. Thus, if actor A sends a message to actor B and then actor A sends a second message to actor B, the message that was sent first will be the first message received by actor B.&#8221;</div></blockquote>
<p>–û–¥–Ω–∞–∫–æ, –≤–æ–ø—Ä–æ—Å –≤—Å–µ-—Ä–∞–≤–Ω–æ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º:</p>
<blockquote>
<div><p>üìù &#8220;What if you introduce a third actor, C? Now actor A and actor C both send one or more messages to actor B. There is no guarantee which message actor B will receive first, either the first from actor A or the first from actor C. Nevertheless, the first message from actor A will always be received by actor B before the second message that actor A sends, and the first message from actor C will always
be received by actor B before the second message that actor C sends...</p>
<p>What is implied? Actors must be prepared to accept and reject messages based on their current state, which is reflected by the order in which previous messages were received. Sometimes a latent message could be accepted even if it is not perfect timing, but the actor‚Äôs reaction to the latent message may have to carefully take into account its current state beforehand. This may be dealt with more gracefully by using the actors become() capabilities.&#8221;</p>
<p class="attribution">&mdash;&#8220;Reactive Messaging Patterns with the Actor Model: Applications and Integration in Scala and Akka&#8221; by Vaughn Vernon, Chapter &#8220;5. Messaging Channels :: Point-to-Point Channel&#8221;</p>
</div></blockquote>
<p>–ö—Ä–æ–º–µ —Ç–æ–≥–æ,</p>
<blockquote>
<div><p>üìù &#8220;Because individual messages may follow different routes, some messages are likely to pass through the processing steps sooner than others, <strong>resulting in the messages getting out of order</strong>. However, some subsequent processing steps do require in-sequence processing of messages, for example to maintain referential integrity.</p>
<p>One common way things get out of sequence is the fact that different messages may take different processing paths. Let&#8217;s look at a simple example. Let&#8217;s assume we are dealing with a numbered sequence of messages. If all even numbered messages have to undergo a special transformation whereas all odd numbered messages can be passed right through, then odd numbered messages will appear on the resulting channel while the even ones queue up at the transformation. If the transformation is quite slow, all odd messages may appear on the output channel before a single even message makes it, bringing the sequence completely out of order.</p>
<p>To avoid getting the messages out of order, we could introduce a loop-back (acknowledgment) mechanism that makes sure that only one message at a time passes through the system. The next message will not be sent until the last one is done processing. This conservative approach will resolve the issue, but has two significant drawbacks. First, it can slow the system significantly. If we have a large number of parallel processing units, we would severely underutilize the processing power. In many instances, the reason for parallel processing is that we need to increase performance, so throttling traffic to one message at a time would complete erase the purpose of the solution. The second issue is that this approach requires us to have control over messages being sent into the processing units. However, often we find ourselves at the receiving end of an out-of-sequence message stream without having control over the message origin.&#8221;</p>
<p class="attribution">&mdash;&#8220;Enterprise Integration Patterns: Designing, Building, and Deploying Messaging Solutions&#8221; by Gregor Hohpe, Bobby Woolf</p>
</div></blockquote>
<p>–†–µ—à–µ–Ω–∏–µ?</p>
<blockquote>
<div><p>üìù &#8220;While not discussed in detail here, Message Metadata can be used to achieve causal consistency [<a class="reference external" href="https://queue.acm.org/detail.cfm?id=2610533">AMC-Causal Consistency</a>] among Messages (130) that must be replicated across a network with full ordering preserved [<a class="reference external" href="http://www.bailis.org/papers/bolton-sigmod2013.pdf">Bolt-on Causal Consistency</a>].&#8221;</p>
<p class="attribution">&mdash;&#8220;Reactive Messaging Patterns with the Actor Model: Applications and Integration in Scala and Akka&#8221; by Vaughn Vernon, Chapter &#8220;10. System Management and Infrastructure :: Message Metadata/History&#8221;</p>
</div></blockquote>
<blockquote>
<div><p>üìù &#8220;Even so, a technique called causal consistency [<a class="reference external" href="https://queue.acm.org/detail.cfm?id=2610533">AMC-Causal Consistency</a>] can be used to achieve the same.&#8221;</p>
<p class="attribution">&mdash;&#8220;Reactive Messaging Patterns with the Actor Model: Applications and Integration in Scala and Akka&#8221; by Vaughn Vernon, Chapter &#8220;10. System Management and Infrastructure :: Message Journal/Store&#8221;</p>
</div></blockquote>
<blockquote>
<div><p>üìù &#8220;To see the full power that results from using Domain Events , consider the concept of causal consistency. A business domain provides causal consistency if its operations that are causally related ‚Äîone operation causes another‚Äîare seen by every dependent node of a distributed system in the same order [<a class="reference external" href="https://queue.acm.org/detail.cfm?id=2610533">Causal</a>] . This means that causally related operations must occur in a specific order, and thus one thing cannot happen unless another thing happens before it. Perhaps this means that one Aggregate cannot be created or modified until it is clear that a specific operation occurred to another
Aggregate.&#8221;</p>
<p class="attribution">&mdash;&#8220;Domain-Driven Design Distilled&#8221; by Vaughn Vernon</p>
</div></blockquote>
<p>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∂–∏–≤—É—é <a class="reference external" href="https://eventsourcing.readthedocs.io/en/v8.3.0/topics/process.html#causal-dependencies">–æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ Causal Consistency</a> –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –º–æ–∂–Ω–æ –≤ EventSourcing Framework. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è <a class="reference external" href="https://github.com/johnbywater/eventsourcing/blob/fd73c5dbd97c0ae759c59f7bb0700afb12db7532/eventsourcing/application/process.py#L273">–∑–¥–µ—Å—å</a>.</p>
<p>–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, Causal —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å—Ç—Ä–æ–≥—É—é –ª–∏–Ω–µ–∞—Ä–∏–∑–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π (–∫–æ—Ç–æ—Ä–∞—è —á–∞—Å—Ç–æ –∏–∑–±—ã—Ç–æ—á–Ω–∞) –∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –∏ –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º, –Ω–µ –¥–æ–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –≤ –ø–æ—Ç–æ–∫–∞—Ö –ø—Ä–∏—á–∏–Ω–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–≥–¥–µ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–∞).</p>
<p>–û–±—ã—á–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –ø–æ—Ç–æ–∫–∞ (<code class="docutils literal"><span class="pre">streamId</span></code>) –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–≥—Ä–µ–≥–∞—Ç–∞. –ê –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏—è –≤ —ç—Ç–æ–º –ø–æ—Ç–æ–∫–µ (<code class="docutils literal"><span class="pre">position</span></code>) –æ–±—ã—á–Ω–æ <a class="reference external" href="https://github.com/johnbywater/eventsourcing/blob/fd73c5dbd97c0ae759c59f7bb0700afb12db7532/eventsourcing/application/process.py#L82">–≤—ã—Å—Ç—É–ø–∞–µ—Ç –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ –∞–≥—Ä–µ–≥–∞—Ç–∞</a></p>
<p>–î—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–≥–æ Causal Store –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –≥–ª–∞–≤–µ &#8220;6.4.2 Causal Store&#8221; —Å—Ç–∞—Ç—å–∏ &#8220;<a class="reference external" href="https://www.microsoft.com/en-us/research/publication/principles-of-eventual-consistency/">Principles of Eventual Consistency</a>&#8221; (<a class="reference external" href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/final-printversion-10-5-14.pdf">pdf</a>) by Sebastian Burckhardt, Microsoft Research.</p>
<p>–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Vector Clock –Ω–∞ Golang - <a class="reference external" href="https://labix.org/vclock">vclock</a>.
–°—Ç–∞—Ç—å—è –æ–± —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –Ω–∞ —Å–∞–π—Ç–µ –∞–≤—Ç–æ—Ä–∞: &#8220;<a class="reference external" href="https://blog.labix.org/2010/12/21/vector-clock-support-for-go">Vector clock support for Go</a>&#8221; by Gustavo Niemeyer.</p>
<blockquote>
<div><p>üìù &#8220;Note that just <strong>saving the Domain Event in its causal order doesn‚Äôt guarantee that it will arrive at other distributed nodes in the same order</strong>. Thus, it is also the responsibility of the consuming Bounded Context to recognize proper <strong>causality</strong>. It might be the Domain Event type itself that can indicate causality, or it may be <strong>metadata</strong> associated with the Domain Event, such as a <strong>sequence</strong> or <strong>causal identifier</strong>. The <strong>sequence</strong> or <strong>causal identifier</strong> would <strong>indicate what caused this Domain Event, and if the cause was not yet seen, the consumer must wait to apply the newly arrived event until its cause arrives</strong>. In some cases it is possible to ignore latent Domain Events that have already been superseded by the actions associated with a later one; in this case causality has a dismissible impact [–æ–± —ç—Ç–æ–º —Å–ø–æ—Å–æ–±–µ —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å —Ä–∞–Ω–µ–µ, –ø—Ä–∏–º. –º–æ—ë].&#8221;</p>
<p class="attribution">&mdash;&#8220;Domain-Driven Design Distilled&#8221; by Vaughn Vernon, Chapter &#8220;6. Tactical Design with Domain Events:: Designing, Implementing, and Using Domain Events&#8221;</p>
</div></blockquote>
<blockquote>
<div><p>üìù &#8220;The first option is to use message sessions, a feature of the Azure Service Bus. If you use <strong>message sessions</strong>, this guarantees that messages within a session are delivered in the same order that they were sent.
The second alternative is to modify the handlers within the application to detect out-of-order messages through the use of sequence numbers or timestamps added to the messages when they are sent. <strong>If the receiving handler detects an out-of-order message, it rejects the message and puts it back onto the queue or topic to be processed later, after it has processed the messages that were sent before the rejected message.</strong>&#8220;</p>
<p class="attribution">&mdash;&#8220;CQRS Journey&#8221; by Dominic Betts, Juli√°n Dom√≠nguez, Grigori Melnik, Fernando Simonazzi, Mani Subramanian, Chapter &#8220;<a class="reference external" href="https://docs.microsoft.com/ru-ru/previous-versions/msp-n-p/jj591565(v=pandp.10)#message-ordering">Journey 6: Versioning Our System :: Message ordering</a>&#8220;</p>
</div></blockquote>
<blockquote>
<div><p>üìù &#8220;<strong>Actors must be prepared to accept and reject messages based on their current state, which is reflected by the order in which previous messages were received.</strong> Sometimes a latent message could be accepted even if it is not perfect timing, but the actor‚Äôs reaction to the latent message may have to carefully take into account its current state beforehand. This may be dealt with more gracefully by using the actors become() capabilities.&#8221;</p>
<p class="attribution">&mdash;&#8220;Reactive Messaging Patterns with the Actor Model: Applications and Integration in Scala and Akka&#8221; by Vaughn Vernon, Chapter &#8220;5. Messaging Channels :: Point-to-Point Channel&#8221;</p>
</div></blockquote>
<p>–†–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ EIP patterns:</p>
<ul class="simple">
<li>&#8220;<a class="reference external" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/CorrelationIdentifier.html">Correlation Identifier</a>&#8220;</li>
<li>&#8220;<a class="reference external" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/MessageSequence.html">Message Sequence</a>&#8220;</li>
</ul>
<p>–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –≤ Event Sourcing.</p>
<p>–í  –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö eventstore –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ <code class="docutils literal"><span class="pre">$causationid</span></code> and <code class="docutils literal"><span class="pre">$correlationid</span></code>.</p>
<blockquote>
<div><p>üìù &#8220;The are both really simple patterns I have never quite understood why they end up so misunderstood.
Let&#8217;s say every message has 3 ids. 1 is its id. Another is correlation the last it causation.
The rules are quite simple. If you are responding to a message, you copy its correlation id as your correlation id, its message id is your causation id.
This allows you to see an entire conversation (correlation id) or to see what causes what (causation id).
Cheers,
Greg Young&#8221;</p>
<p><a class="reference external" href="https://discuss.eventstore.com/t/causation-or-correlation-id/828/4">https://discuss.eventstore.com/t/causation-or-correlation-id/828/4</a></p>
</div></blockquote>
<p>–ü—Ä–∏–º–µ—Ä—ã:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/microsoftarchive/cqrs-journey/blob/6ffd9a8c8e865a9f8209552c52fa793fbd496d1f/scripts/CreateDatabaseObjects.sql#L57-L62">—Ä–∞–∑</a></li>
<li><a class="reference external" href="https://github.com/kgrzybek/modular-monolith-with-ddd/blob/4e2d66d16f97b3c863fbecd072dad52338516882/src/Modules/Payments/Infrastructure/AggregateStore/SqlStreamAggregateStore.cs#L44-L45">–¥–≤–∞</a></li>
</ul>
<p>–®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ EIP-–ø–∞—Ç—Ç–µ—Ä–Ω–∞–º:</p>
<ul class="simple">
<li>&#8220;<a class="reference external" href="https://www.enterpriseintegrationpatterns.com/download/EIPTutorialReferenceChart.pdf">Enterprise Integration Patterns Tutorial Reference Chart</a>&#8220;</li>
</ul>
<p>–ù–æ –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫ –≤—Å–µ–≥–æ –æ–¥–∏–Ω, –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Ç–æ –∏ —Ç–æ–≥–¥–∞ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∞. –ü—Ä–∏–º–µ—Ä –∏–∑ NATS-Streaming Server:</p>
<blockquote>
<div><p>üìù &#8220;With the redelivery feature, order can‚Äôt be guaranteed, since by definition server will resend messages that have not been acknowledged after a period of time. Suppose your consumer receives messages 1, 2 and 3, does not acknowledge 2. Then message 4 is produced, server sends this message to the consumer. The redelivery timer then kicks in and server will resend message 2. The consumer would see messages: 1, 2, 3, 4, 2, 5, etc...</p>
<p>In conclusion, the server does not offer this guarantee although it tries to redeliver messages first thing on startup. That being said, if the durable is stalled (number of outstanding messages &gt;= MaxInflight), then the redelivery will also be stalled, and new messages will be allowed to be sent. When the consumer resumes acking messages, then it may receive redelivered and new messages interleaved (new messages will be in order though).&#8221;</p>
<p class="attribution">&mdash;nats-streaming-server, <a class="reference external" href="https://github.com/nats-io/nats-streaming-server/issues/187#issuecomment-257024506">issue #187 &#8220;Order of delivery&#8221;</a>, comment by Ivan Kozlovic</p>
</div></blockquote>
<p>–ö—Å—Ç–∞—Ç–∏, –ø—Ä–æ–±–ª–µ–º–∞ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Ö–æ—Ä–æ—à–æ –æ–ø–∏—Å–∞–Ω–∞ –≤ –≥–ª–∞–≤–µ &#8220;Projections and Queries :: Building read models from events :: Subscriptions&#8221; –∫–Ω–∏–≥–∏ &#8220;<a class="reference external" href="https://www.amazon.com/Hands-Domain-Driven-Design-NET-ebook/dp/B07C5WSR9B">Hands-On Domain-Driven Design with .NET Core: Tackling complexity in the heart of software by putting DDD principles into practice</a>&#8221; by Alexey Zimarev. –ò –æ–Ω –¥–æ–±–∞–≤–∏–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ <a class="reference external" href="https://t.me/emacsway_chat/85">–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤ —á–∞—Ç –∫–∞–Ω–∞–ª–∞</a>.</p>
<div class="note update admonition">
<p class="first last admonition-title">Updated on Mar 31, 2021</p>
</div>
</div>

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  
  <a href="../domain-events-in-ddd/">
    <i class="fa fa-arrow-circle-left"></i>
    Domain Events in DDD
  </a>
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  
  <a href="../cqrs-command-and-result/">
    –ú–æ–∂–µ—Ç –ª–∏ CQRS-–∫–æ–º–∞–Ω–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç?
    <i class="fa fa-arrow-circle-right"></i>
  </a>
  </span>
  
</div>

  
  
    <div class="section">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'emacsway';
        var disqus_identifier = '/ru/message-ordering-in-competing-consumers/';
        var disqus_title = '–û –≥–æ–Ω–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —É—Å–ª–æ–≤–∏—è—Ö –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤';
        var disqus_url = 'https://emacsway.github.io/ru/message-ordering-in-competing-consumers/';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  
  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../">
    <img class="logo" src="../../_static/logo.jpg" alt="Logo"/>
    
    <h1 class="logo logo-name">@emacsway's blog</h1>
    
  </a>
</p>









  
  
  <h2>
  
  <i class="fa fa-calendar"></i>
    Mar 31, 2021
  
  </h2>

  <ul>
    

  
  <li><i class="fa-fw fa fa-user"></i>
    
      
      <a href="../../blog/author/ivan-zakrevsky/">Ivan Zakrevsky</a>
      
    </li>
  

  

  
  <li><i class="fa-fw fa fa-language"></i>
    
      
      <a href="../../blog/language/russian/">Russian</a>
      
    </li>
  

  

  
  <li><i class="fa-fw fa fa-tags"></i>
      
    
      
      <a href="../../blog/tag/ddd/">DDD</a>,
      
    
      
      <a href="../../blog/tag/microservices/">Microservices</a>,
      
    
      
      <a href="../../blog/tag/distributed-systems/">Distributed Systems</a>,
      
    
      
      <a href="../../blog/tag/eip/">EIP</a>
      
    </li>
  
  
  <li>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'emacsway'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    <i class="fa-fw fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/ru/message-ordering-in-competing-consumers/"> </a>
  </li>
  
  </ul>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/">About me</a></li>
</ul>


<ul>
    
    <li class="toctree-l1"><a href="https://t.me/emacsway_log"><i class="fab fa-telegram"></i> Telegram</a></li>
    
</ul>

  <h3><a href="../../blog/">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../cqrs-command-and-result/">Apr 02 - –ú–æ–∂–µ—Ç –ª–∏ CQRS-–∫–æ–º–∞–Ω–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç?</a></li>
    
      <li><a href="../domain-events-in-ddd/">May 05 - Domain Events in DDD</a></li>
    
      <li><a href="../self-learning-for-software-engineer/">Oct 11 - –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è</a></li>
    
      <li><a href="../tdd/">Sep 30 - TDD - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
    
      <li><a href="../role-of-service-layer-in-cqrs-and-event-sourcing-using-redux-in-angular-as-an-example/">Sep 16 - –†–æ–ª—å —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è –≤ CQRS –∏ Event Sourcing –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Redux –≤ Angular</a></li>
    
  </ul>

  <h3><a href="../../blog/tag/">Tags</a></h3>
  <style type="text/css">
    ul.ablog-cloud {list-style: none; overflow: auto;}
    ul.ablog-cloud li {float: left; height: 20pt; line-height: 18pt; margin-right: 5px;}
    ul.ablog-cloud a {text-decoration: none; vertical-align: middle;}
    li.ablog-cloud-1{font-size: 80%;}
    li.ablog-cloud-2{font-size: 95%;}
    li.ablog-cloud-3{font-size: 110%;}
    li.ablog-cloud-4{font-size: 125%;}
    li.ablog-cloud-5{font-size: 140%;}
  </style>
  <ul class="ablog-cloud">
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/agile/">Agile</a></li>
      
    
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/angular/">Angular</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../blog/tag/architecture/">Architecture</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/cqrs/">CQRS</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/cqs/">CQS</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/clean-code/">Clean Code</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/db/">DB</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-4">
        <a href="../../blog/tag/ddd/">DDD</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/datamapper/">DataMapper</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/dependency-injection/">Dependency Injection</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/design/">Design</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/distributed-systems/">Distributed Systems</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/django/">Django</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../blog/tag/django-model/">Django Model</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/docker/">Docker</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/eip/">EIP</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/emacs/">Emacs</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/event-sourcing/">Event Sourcing</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/extreme-programming/">Extreme Programming</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/flux/">Flux</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/fowler/">Fowler</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/functional-programming/">Functional Programming</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/hr/">HR</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/hiring/">Hiring</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/javascript/">JavaScript</a></li>
      
    
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/microservices/">Microservices</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-4">
        <a href="../../blog/tag/model/">Model</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/oop/">OOP</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../../blog/tag/orm/">ORM</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-4">
        <a href="../../blog/tag/python/">Python</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/redux/">Redux</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/refactoring/">Refactoring</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/repository/">Repository</a></li>
      
    
      
    
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/sql/">SQL</a></li>
      
    
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/scrum/">Scrum</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/service-layer/">Service Layer</a></li>
      
    
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/storm-orm/">Storm ORM</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/tdd/">TDD</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/xp/">XP</a></li>
      
    
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/autocomplete/">autocomplete</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/cache/">cache</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/programming/">programming</a></li>
      
    
  </ul>

  <h3><a href="../../blog/category/">Categories</a></h3>
  <ul>
  
    
    <li><a href="../../blog/category/architecture/">Architecture (1)</a></li>
    
  
    
    <li><a href="../../blog/category/cqrs/">CQRS (1)</a></li>
    
  
    
    <li><a href="../../blog/category/clean-architecture/">Clean Architecture (1)</a></li>
    
  
    
    <li><a href="../../blog/category/clean-code/">Clean Code (1)</a></li>
    
  
    
    <li><a href="../../blog/category/ddd/">DDD (1)</a></li>
    
  
    
    <li><a href="../../blog/category/event-sourcing/">Event Sourcing (1)</a></li>
    
  
    
    <li><a href="../../blog/category/event-driven/">Event-Driven (1)</a></li>
    
  
    
    <li><a href="../../blog/category/extreme-programming/">Extreme Programming (1)</a></li>
    
  
    
    <li><a href="../../blog/category/microservices/">Microservices (1)</a></li>
    
  
    
    <li><a href="../../blog/category/refactoring/">Refactoring (1)</a></li>
    
  
    
    <li><a href="../../blog/category/tdd/">TDD (1)</a></li>
    
  
    
    <li><a href="../../blog/category/xp/">XP (1)</a></li>
    
  
    
    <li><a href="../../blog/category/programming/">programming (1)</a></li>
    
  
  </ul>

  <h3><a href="../../blog/archive/">Archives</a></h3>
  <ul>
  
    
    <li><a href="../../blog/2021/">2021 (2)</a></li>
    
  
    
    <li><a href="../../blog/2020/">2020 (1)</a></li>
    
  
    
    <li><a href="../../blog/2019/">2019 (2)</a></li>
    
  
    
    <li><a href="../../blog/2018/">2018 (4)</a></li>
    
  
    
    <li><a href="../../blog/2017/">2017 (9)</a></li>
    
  
    
    <li><a href="../../blog/2016/">2016 (5)</a></li>
    
  
    
    <li><a href="../../blog/2015/">2015 (6)</a></li>
    
  
  </ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy;2021, Ivan Zakrevskii.
      
      |
      Powered by <a href="http://ablog.readthedocs.org/">ABlog</a> &amp; <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../../_sources/ru/message-ordering-in-competing-consumers.txt"
          rel="nofollow">Page source</a>
    </div>

    

    


    

        <!-- Go to www.addthis.com/dashboard to customize your tools -->
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-597ba7fb5af2ef1e"></script>

    


<!-- google.com/analytics counter -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69288289-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- /google.com/analytics counter -->


<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter32948409 = new Ya.Metrika({
                    id:32948409,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/32948409" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->



  </body>
</html>